FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjCiMgU2hhcmVkIFBhcmFtZXRlcnMKIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
Cl9wOiAmX3AKICAtIG5hbWU6IGF3c19hY2Nlc3Nfa2V5CiAgICBkZXNjcmlwdGlvbjogYXdzIGFj\
Y2VzcyBrZXkgdG8gYXV0aGVudGljYXRlIHRvIGF3cyB3aXRoCiAgICB0eXBlOiBzdHJpbmcKICAt\
IG5hbWU6IGF3c19zZWNyZXRfa2V5CiAgICBkZXNjcmlwdGlvbjogYXdzIHNlY3JldCBrZXkgdG8g\
YXV0aGVudGljYXRlIHRvIGF3cyB3aXRoCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IGJhY2t1\
cF9yZXRlbnRpb24KICAgIGRlc2NyaXB0aW9uOiBiYWNrdXAgcmV0ZW50aW9uIHBlcmlvZAogICAg\
dHlwZTogaW50CiAgICBkZWZhdWx0OiAwCiAgLSBuYW1lOiBkYl9lbmdpbmUKICAgIGRlc2NyaXB0\
aW9uOiBkYXRhYmFzZSBlbmdpbmUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogcG9zdGdy\
ZXMKICAtIG5hbWU6IGRiX25hbWUKICAgIGRlc2NyaXB0aW9uOiBuYW1lIG9mIHRoZSBkYXRhYmFz\
ZSB0byBjcmVhdGUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogdGVzdGRiCiAgLSBuYW1l\
OiBkYl9wYXNzd29yZAogICAgZGVzY3JpcHRpb246IG1hc3RlciBwYXNzd29yZAogICAgdHlwZTog\
c3RyaW5nCiAgICBkZWZhdWx0OiBkYnBhc3N3ZAogIC0gbmFtZTogZGJfc2l6ZQogICAgZGVzY3Jp\
cHRpb246IHNpemUgb2YgdGhlIGRiIGluIGdiCiAgICB0eXBlOiBpbnQKICAgIGRlZmF1bHQ6IDEw\
CiAgLSBuYW1lOiBkYl91c2VybmFtZQogICAgZGVzY3JpcHRpb246IG1hc3RlciBkYiB1c2VybmFt\
ZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiBkYnVzZXIKICAtIG5hbWU6IGVuZ2luZV92\
ZXJzaW9uCiAgICBkZXNjcmlwdGlvbjogZGIgZW5naW5lIHZlcnNpb24KICAgIHR5cGU6IHN0cmlu\
ZwogICAgZGVmYXVsdDogOS42LjEKICAtIG5hbWU6IGluc3RhbmNlX3R5cGUKICAgIGRlc2NyaXB0\
aW9uOiBhd3MgaW5zdGFuY2UgdHlwZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiBkYi5t\
My5tZWRpdW0KICAtIG5hbWU6IHBvcnQKICAgIGRlc2NyaXB0aW9uOiBwb3J0IHRoZSBkYXRhYmFz\
ZSB3aWxsIGxpc3RlbiBvbgogICAgdHlwZTogaW50CiAgICBkZWZhdWx0OiA1NDMyCiAgLSBuYW1l\
OiByZWdpb24KICAgIGRlc2NyaXB0aW9uOiBhd3MgcmVnaW9uCiAgICB0eXBlOiBzdHJpbmcKICAt\
IG5hbWU6IHN1Ym5ldAogICAgZGVzY3JpcHRpb246IHZwYyBzdWJuZXQgdG8gZGVwbG95IGluc3Rh\
bmNlIG9uCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHZwY19zZWN1cml0eV9ncm91cHMKICAg\
IGRlc2NyaXB0aW9uOiB2cGMgc2VjdXJpdHkgZ3JvdXBzIHRvIGFzc2lnbiB0byB0aGUgaW5zdGFu\
Y2UKICAgIHR5cGU6IHN0cmluZwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCm5hbWU6IHJkcy1wb3N0\
Z3Jlcy1hcGIKaW1hZ2U6IGR5bXVycmF5L3Jkcy1wb3N0Z3Jlcy1hcGIKZGVzY3JpcHRpb246IE1h\
bmFnZWQgcmVsYXRpb25hbCBkYXRhYmFzZSBzZXJ2aWNlIHdpdGggYSBjaG9pY2Ugb2Ygc2l4IHBv\
cHVsYXIgZGF0YWJhc2UgZW5naW5lcy4gIFNldCB1cCwgb3BlcmF0ZSwgYW5kIHNjYWxlIGEgcmVs\
YXRpb25hbCBkYXRhYmFzZSBpbiB0aGUgY2xvdWQgd2l0aCBqdXN0IGEgZmV3IGNsaWNrcy4KdGFn\
czoKICAtIGFtYXpvbgogIC0gZGF0YWJhc2UKYmluZGFibGU6IHRydWUKYXN5bmM6IG9wdGlvbmFs\
Cm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiAiQW1hem9uIFJEUyAtIFBvc3RncmVTUUwgKEFQQiki\
CiAgbG9uZ0Rlc2NyaXB0aW9uOiAiQW1hem9uIFJlbGF0aW9uYWwgRGF0YWJhc2UgU2VydmljZSAo\
QW1hem9uIFJEUykgbWFrZXMgaXQgZWFzeSB0byBzZXQgdXAsIG9wZXJhdGUsIGFuZCBzY2FsZSBh\
IHJlbGF0aW9uYWwgZGF0YWJhc2UgaW4gdGhlIGNsb3VkLiBJdCBwcm92aWRlcyBjb3N0LWVmZmlj\
aWVudCBhbmQgcmVzaXphYmxlIGNhcGFjaXR5IHdoaWxlIG1hbmFnaW5nIHRpbWUtY29uc3VtaW5n\
IGRhdGFiYXNlIGFkbWluaXN0cmF0aW9uIHRhc2tzLCBmcmVlaW5nIHlvdSB1cCB0byBmb2N1cyBv\
biB5b3VyIGFwcGxpY2F0aW9ucyBhbmQgYnVzaW5lc3MuIEFtYXpvbiBSRFMgcHJvdmlkZXMgeW91\
IHNpeCBmYW1pbGlhciBkYXRhYmFzZSBlbmdpbmVzIHRvIGNob29zZSBmcm9tLCBpbmNsdWRpbmcg\
QW1hem9uIEF1cm9yYSwgUG9zdGdyZVNRTCwgTXlTUUwsIE1hcmlhREIsIE9yYWNsZSwgYW5kIE1p\
Y3Jvc29mdCBTUUwgU2VydmVyLiIKICBpbWFnZVVybDogImh0dHBzOi8vczMuYW1hem9uYXdzLmNv\
bS9mdXNvci8yMDE3ZGVtby9EYXRhYmFzZV9BbWF6b25SRFNfUG9zdGdyZVNRTGluc3RhbmNlLnBu\
ZyIKICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yZHMvIgpwbGFu\
czoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBSRFMgUG9zdGdyZXNxbCBkZXBs\
b3ltZW50IHRvIEFXUwogICAgZnJlZTogdHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlO\
YW1lOiBEZWZhdWx0CiAgICAgIGxvbmdEZXNjcmlwdGlvbjogVGhpcyBwbGFuIHByb3ZpZGVzIGFu\
IFJEUyBQb3N0Z3Jlc3FsIGRlcGxveW1lbnQgdG8gQW1hem9uIFdlYiBTdG9yYWdlCiAgICAgIGNv\
c3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqX3AK"
COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

RUN yum -y install python-boto postgresql && yum clean all

USER apb
